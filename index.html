<!DOCTYPE html>

<html lang="it">

<head>

Â  Â  <!-- Configurazione base e metadati per la responsivitÃ  -->

Â  Â  <meta charset="UTF-8">

Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">

Â  Â  <title>Desabafo - Menu</title>

Â  Â  <!-- Importazione dei font Google (Cormorant Garamond e Playfair Display) -->

Â  Â  <link rel="preconnect" href="https://fonts.googleapis.com">

Â  Â  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

Â  Â  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;700&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">

Â  Â  <style>

Â  Â  Â  Â  /* Reset CSS per margini e padding */

Â  Â  Â  Â  * {

Â  Â  Â  Â  Â  Â  margin: 0;

Â  Â  Â  Â  Â  Â  padding: 0;

Â  Â  Â  Â  Â  Â  box-sizing: border-box;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Definizione delle variabili di colore */

Â  Â  Â  Â  :root {

Â  Â  Â  Â  Â  Â  --primary-brown: #5D4037;

Â  Â  Â  Â  Â  Â  --light-brown: #8D6E63;

Â  Â  Â  Â  Â  Â  --dark-brown: #3E2723;

Â  Â  Â  Â  Â  Â  --cream: #F5EFE5;

Â  Â  Â  Â  Â  Â  --text-dark: #333;

Â  Â  Â  Â  Â  Â  --accent-gold: #D4AF37;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Stile del corpo e sfondo */

Â  Â  Â  Â  body {

Â  Â  Â  Â  Â  Â  font-family: 'Cormorant Garamond', serif;

Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, var(--cream) 0%, #E6D7C3 100%);

Â  Â  Â  Â  Â  Â  color: var(--text-dark);

Â  Â  Â  Â  Â  Â  min-height: 100vh;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Contenitore principale a larghezza limitata e centrato */

Â  Â  Â  Â  .container {

Â  Â  Â  Â  Â  Â  max-width: 1000px;

Â  Â  Â  Â  Â  Â  margin: 0 auto;

Â  Â  Â  Â  Â  Â  padding: 20px;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Stili per l'intestazione/banner superiore */

Â  Â  Â  Â  .header {

Â  Â  Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  Â  Â  margin-bottom: 40px;

Â  Â  Â  Â  Â  Â  padding: 30px 20px;

Â  Â  Â  Â  Â  Â  background: var(--dark-brown);

Â  Â  Â  Â  Â  Â  border-radius: 20px;

Â  Â  Â  Â  Â  Â  color: var(--cream);

Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Stili per il logo centrale */

Â  Â  Â  Â  .logo {

Â  Â  Â  Â  Â  Â  width: 200px;

Â  Â  Â  Â  Â  Â  height: 200px;

Â  Â  Â  Â  Â  Â  margin: 0 auto;

Â  Â  Â  Â  Â  Â  background: var(--cream);

Â  Â  Â  Â  Â  Â  border-radius: 15px;

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  Â  Â  justify-content: center;

Â  Â  Â  Â  Â  Â  padding: 15px;

Â  Â  Â  Â  Â  Â  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);

Â  Â  Â  Â  }



Â  Â  Â  Â  .logo img {

Â  Â  Â  Â  Â  Â  width: 100%;

Â  Â  Â  Â  Â  Â  height: 100%;

Â  Â  Â  Â  Â  Â  object-fit: contain;

Â  Â  Â  Â  Â  Â  border-radius: 15px;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Nasconde titoli e paragrafi nell'header (solo logo visibile) */

Â  Â  Â  Â  .header h1, .header p {

Â  Â  Â  Â  Â  Â  display: none;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Stili per la finestra modale di accesso Admin */

Â  Â  Â  Â  .login-modal {

Â  Â  Â  Â  Â  Â  position: fixed;

Â  Â  Â  Â  Â  Â  top: 0;

Â  Â  Â  Â  Â  Â  left: 0;

Â  Â  Â  Â  Â  Â  width: 100%;

Â  Â  Â  Â  Â  Â  height: 100%;

Â  Â  Â  Â  Â  Â  background: rgba(0, 0, 0, 0.8);

Â  Â  Â  Â  Â  Â  display: none; /* Inizialmente nascosto */

Â  Â  Â  Â  Â  Â  justify-content: center;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  Â  Â  z-index: 10000;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Contenitore interno della modale */

Â  Â  Â  Â  .login-box {

Â  Â  Â  Â  Â  Â  background: white;

Â  Â  Â  Â  Â  Â  padding: 30px;

Â  Â  Â  Â  Â  Â  border-radius: 15px;

Â  Â  Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  Â  Â  max-width: 400px;

Â  Â  Â  Â  Â  Â  width: 90%;

Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 20px rgba(0,0,0,0.3);

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Pannello di amministrazione (nascosto per default) */

Â  Â  Â  Â  .admin-panel {

Â  Â  Â  Â  Â  Â  display: none;

Â  Â  Â  Â  Â  Â  background: white;

Â  Â  Â  Â  Â  Â  padding: 20px;

Â  Â  Â  Â  Â  Â  border-radius: 10px;

Â  Â  Â  Â  Â  Â  margin-bottom: 20px;

Â  Â  Â  Â  Â  Â  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Stili per il layout del menu (griglia con gap) */

Â  Â  Â  Â  .categories {

Â  Â  Â  Â  Â  Â  display: grid;

Â  Â  Â  Â  Â  Â  gap: 30px;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Stili per ogni singola categoria */

Â  Â  Â  Â  .category {

Â  Â  Â  Â  Â  Â  background: white;

Â  Â  Â  Â  Â  Â  padding: 25px;

Â  Â  Â  Â  Â  Â  border-radius: 15px;

Â  Â  Â  Â  Â  Â  box-shadow: 0 5px 15px rgba(139, 69, 19, 0.1);

Â  Â  Â  Â  Â  Â  border-left: 5px solid var(--primary-brown);

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Stili per il titolo della categoria */

Â  Â  Â  Â  .category h2 {

Â  Â  Â  Â  Â  Â  color: var(--primary-brown);

Â  Â  Â  Â  Â  Â  font-size: 2.2em;

Â  Â  Â  Â  Â  Â  margin-bottom: 20px;

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  align-items: center;

Â  Â  Â  Â  Â  Â  gap: 10px;

Â  Â  Â  Â  Â  Â  font-family: 'Playfair Display', serif;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Contenitore per gli elementi del menu all'interno di una categoria */

Â  Â  Â  Â  .items {

Â  Â  Â  Â  Â  Â  display: grid;

Â  Â  Â  Â  Â  Â  gap: 15px;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Stili per ogni singolo elemento/piatto del menu */

Â  Â  Â  Â  .item {

Â  Â  Â  Â  Â  Â  padding: 15px;

Â  Â  Â  Â  Â  Â  border-radius: 10px;

Â  Â  Â  Â  Â  Â  background: var(--cream);

Â  Â  Â  Â  Â  Â  border-left: 3px solid var(--light-brown);

Â  Â  Â  Â  Â  Â  transition: all 0.3s ease;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Sezione del QR Code - Stili per posizionarlo al centro */

Â  Â  Â  Â  .qr-section {

Â  Â  Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  Â  Â  margin: 40px 0;

Â  Â  Â  Â  Â  Â  padding: 20px;

Â  Â  Â  Â  Â  Â  background: white;

Â  Â  Â  Â  Â  Â  border-radius: 10px;

Â  Â  Â  Â  Â  Â  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Contenitore per il QR Code generato */

Â  Â  Â  Â  .qr-code {

Â  Â  Â  Â  Â  Â  margin: 20px 0;

Â  Â  Â  Â  Â  Â  display: inline-block;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Stili per la stampa del menu (@media print) */

Â  Â  Â  Â  @media print {

Â  Â  Â  Â  Â  Â  /* Nasconde elementi non necessari per la stampa (header, qr, admin) */

Â  Â  Â  Â  Â  Â  .header, .qr-section, .admin-panel {

Â  Â  Â  Â  Â  Â  Â  Â  display: none !important;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  /* Gestisce il layout in colonne per la stampa */

Â  Â  Â  Â  Â  Â  .categories {

Â  Â  Â  Â  Â  Â  Â  Â  display: block;

Â  Â  Â  Â  Â  Â  Â  Â  columns: 2;

Â  Â  Â  Â  Â  Â  Â  Â  column-gap: 40px;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  /* Assicura che le categorie non si interrompano a metÃ  pagina */

Â  Â  Â  Â  Â  Â  .category {

Â  Â  Â  Â  Â  Â  Â  Â  break-inside: avoid-column;

Â  Â  Â  Â  Â  Â  Â  Â  page-break-inside: avoid;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  /* Rimuove ombre e colori di sfondo per risparmiare inchiostro */

Â  Â  Â  Â  Â  Â  .category, .item {

Â  Â  Â  Â  Â  Â  Â  Â  background: none;

Â  Â  Â  Â  Â  Â  Â  Â  box-shadow: none;

Â  Â  Â  Â  Â  Â  Â  Â  border-left: none;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Media Query per schermi piccoli (responsive design) */

Â  Â  Â  Â  @media (max-width: 768px) {

Â  Â  Â  Â  Â  Â  .container {

Â  Â  Â  Â  Â  Â  Â  Â  padding: 10px;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  /* Allinea nome e prezzo verticalmente su mobile */

Â  Â  Â  Â  Â  Â  .item-header {

Â  Â  Â  Â  Â  Â  Â  Â  flex-direction: column;

Â  Â  Â  Â  Â  Â  Â  Â  align-items: flex-start;

Â  Â  Â  Â  Â  Â  Â  Â  gap: 5px;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }

Â  Â  </style>

</head>

<body onclick="hideAdminToggle(event)">

Â  Â  <!-- MODALE DI ACCESSO ADMIN (inizialmente display: none) -->

Â  Â  <div class="login-modal" id="loginModal">

Â  Â  Â  Â  <div class="login-box">

Â  Â  Â  Â  Â  Â  <h3>ğŸ” Accesso Admin</h3>

Â  Â  Â  Â  Â  Â  <p>Inserisci la password per gestire il menu</p>

Â  Â  Â  Â  Â  Â  <input type="password" id="adminPassword" placeholder="Password Admin" onkeypress="if(event.key==='Enter') checkPassword()">

Â  Â  Â  Â  Â  Â  <br>

Â  Â  Â  Â  Â  Â  <button class="login-btn" onclick="checkPassword()">Accedi</button>

Â  Â  Â  Â  Â  Â  <button class="cancel-btn" onclick="closeLogin()">Annulla</button>

Â  Â  Â  Â  Â  Â  <div id="loginError" style="color: red; margin-top: 10px; display: none;">Password non corretta!</div>

Â  Â  Â  Â  </div>

Â  Â  </div>



Â  Â  <!-- PANNELLO DI AMMINISTRAZIONE (inizialmente display: none) -->

Â  Â  <div class="admin-panel" id="adminPanel">

Â  Â  Â  Â  <h3>ğŸ› ï¸ Pannello Admin - Gestione Menu Desabafo</h3>

Â  Â  Â  Â  <!-- Tab di navigazione del pannello Admin -->

Â  Â  Â  Â  <div class="admin-tabs">

Â  Â  Â  Â  Â  Â  <button class="admin-tab active" onclick="showAdminTab('editor')">ğŸ“ Modifica Menu</button>

Â  Â  Â  Â  Â  Â  <button class="admin-tab" onclick="showAdminTab('tools')">ğŸ”§ Strumenti</button>

Â  Â  Â  Â  </div>

Â  Â  Â  Â  <!-- Contenuto della tab Modifica Menu -->

Â  Â  Â  Â  <div class="admin-content active" id="editorContent">

Â  Â  Â  Â  Â  Â  <div class="import-export">

Â  Â  Â  Â  Â  Â  Â  Â  <button class="export-btn" onclick="exportMenu()">ğŸ“¤ Esporta Menu</button>

Â  Â  Â  Â  Â  Â  Â  Â  <button class="import-btn" onclick="importMenu()">ğŸ“¥ Importa Menu</button>

Â  Â  Â  Â  Â  Â  Â  Â  <button class="cancel-btn" onclick="adminLogout()">ğŸšª Logout</button>

Â  Â  Â  Â  Â  Â  Â  Â  <input type="file" id="importFile" accept=".json" style="display: none;" onchange="handleImport(event)">

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="menuEditor"></div>

Â  Â  Â  Â  Â  Â  <button class="save-all-btn" onclick="saveAllChanges()">ğŸ’¾ Salva Tutte le Modifiche</button>

Â  Â  Â  Â  </div>

Â  Â  Â  Â  <!-- Contenuto della tab Strumenti -->

Â  Â  Â  Â  <div class="admin-content" id="toolsContent">

Â  Â  Â  Â  Â  Â  <p><strong>QR Code URL:</strong> <span id="currentUrl"></span></p>

Â  Â  Â  Â  Â  Â  <button onclick="generateQR()">ğŸ”„ Aggiorna QR Code</button>

Â  Â  Â  Â  Â  Â  <button onclick="window.print()">ğŸ–¨ï¸ Stampa Menu</button>

Â  Â  Â  Â  Â  Â  <button onclick="resetMenu()">ğŸ”„ Ripristina Menu Originale</button>

Â  Â  Â  Â  Â  Â  <div style="margin-top: 20px;">

Â  Â  Â  Â  Â  Â  Â  Â  <h4>ğŸ“Š Statistiche Menu</h4>

Â  Â  Â  Â  Â  Â  Â  Â  <p id="menuStats"></p>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>

Â  Â  </div>



Â  Â  <div class="container">

Â  Â  Â  Â  <!-- SEZIONE SUPERIORE CON IL LOGO -->

Â  Â  Â  Â  <div class="header">

Â  Â  Â  Â  Â  Â  <!-- Il logo funge da trigger per l'accesso admin (pressione prolungata) -->

Â  Â  Â  Â  Â  Â  <div class="logo" id="adminLogoTrigger">

Â  Â  Â  Â  Â  Â  Â  Â  <img src="logobafo.png" alt="Desabafo Logo">

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <!-- SEZIONE PRINCIPALE DEL MENU (caricata dal JSON) -->

Â  Â  Â  Â  <div class="categories" id="menuContent">

Â  Â  Â  Â  Â  Â  <!-- Il contenuto del menu verrÃ  inserito qui dal JavaScript -->

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <!-- SEZIONE DEL QR CODE (POSIZIONATA IN FONDO, DOPO IL MENU) -->

Â  Â  Â  Â  <div class="qr-section">

Â  Â  Â  Â  Â  Â  <h3>Scansiona per il menu digitale</h3>

Â  Â  Â  Â  Â  Â  <div class="qr-code" id="qrCode">

Â  Â  Â  Â  Â  Â  Â  Â  <!-- Il QR code verrÃ  generato qui dal JavaScript -->

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>

Â  Â  </div>



Â  Â  <!-- Libreria per la generazione del QR Code -->

Â  Â  <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>

Â  Â  <script>

Â  Â  Â  Â  // Variabili di stato globali e costante per la password

Â  Â  Â  Â  let isAdminLoggedIn = false;

Â  Â  Â  Â  const ADMIN_PASSWORD = "azzaBAFO2025!";

Â  Â  Â  Â  let menuData = {};

Â  Â  Â  Â  let adminTimer; // Timer usato per la pressione prolungata del logo



Â  Â  Â  Â  // Mostra la modale di login

Â  Â  Â  Â  function showLogin() {

Â  Â  Â  Â  Â  Â  document.getElementById('loginModal').style.display = 'flex';

Â  Â  Â  Â  Â  Â  document.getElementById('adminPassword').focus();

Â  Â  Â  Â  }



Â  Â  Â  Â  // Nasconde la modale di login e resetta i campi

Â  Â  Â  Â  function closeLogin() {

Â  Â  Â  Â  Â  Â  document.getElementById('loginModal').style.display = 'none';

Â  Â  Â  Â  Â  Â  document.getElementById('adminPassword').value = '';

Â  Â  Â  Â  Â  Â  document.getElementById('loginError').style.display = 'none';

Â  Â  Â  Â  }



Â  Â  Â  Â  // Controlla la password inserita

Â  Â  Â  Â  function checkPassword() {

Â  Â  Â  Â  Â  Â  const password = document.getElementById('adminPassword').value;

Â  Â  Â  Â  Â  Â  if (password === ADMIN_PASSWORD) {

Â  Â  Â  Â  Â  Â  Â  Â  isAdminLoggedIn = true;

Â  Â  Â  Â  Â  Â  Â  Â  closeLogin();

Â  Â  Â  Â  Â  Â  Â  Â  // Mostra il pannello Admin se la password Ã¨ corretta

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('adminPanel').style.display = 'block';

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  // Mostra messaggio di errore

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('loginError').style.display = 'block';

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('adminPassword').value = '';

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('adminPassword').focus();

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // Effettua il logout admin

Â  Â  Â  Â  function adminLogout() {

Â  Â  Â  Â  Â  Â  isAdminLoggedIn = false;

Â  Â  Â  Â  Â  Â  document.getElementById('adminPanel').style.display = 'none';

Â  Â  Â  Â  }



Â  Â  Â  Â  // Carica i dati del menu dal file JSON (menu-data.json)

Â  Â  Â  Â  function loadMenu() {

Â  Â  Â  Â  Â  Â  fetch('menu-data.json')

Â  Â  Â  Â  Â  Â  Â  Â  .then(response => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!response.ok) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error('File menu-data.json non trovato o errore di rete');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return response.json();

Â  Â  Â  Â  Â  Â  Â  Â  })

Â  Â  Â  Â  Â  Â  Â  Â  .then(data => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  menuData = data.menu_data.categories;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderMenu(); // Chiama la funzione per disegnare il menu

Â  Â  Â  Â  Â  Â  Â  Â  })

Â  Â  Â  Â  Â  Â  Â  Â  .catch(error => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error('Errore nel caricamento del menu:', error);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const menuContent = document.getElementById('menuContent');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  menuContent.innerHTML = '<p class="error-message" style="text-align:center; color:red;">Impossibile caricare il menu. Riprova piÃ¹ tardi.</p>';

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  }



Â  Â  Â  Â  // Disegna il menu sul DOM leggendo i dati caricati

Â  Â  Â  Â  function renderMenu() {

Â  Â  Â  Â  Â  Â  const menuContent = document.getElementById('menuContent');

Â  Â  Â  Â  Â  Â  menuContent.innerHTML = '';

Â  Â  Â  Â  Â  Â  if (!Array.isArray(menuData)) {

Â  Â  Â  Â  Â  Â  Â  Â  console.error("I dati del menu non sono in un formato valido (array).");

Â  Â  Â  Â  Â  Â  Â  Â  menuContent.innerHTML = '<p class="error-message" style="text-align:center; color:red;">Errore nel formato dei dati del menu. Contattare l\'amministratore.</p>';

Â  Â  Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  menuData.forEach(category => {

Â  Â  Â  Â  Â  Â  Â  Â  if (category && category.items) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Crea il div per la categoria

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const categoryDiv = document.createElement('div');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  categoryDiv.className = 'category';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const categoryHeader = document.createElement('h2');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  categoryHeader.innerHTML = `<span class="category-icon">${category.icon}</span> ${category.name}`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  categoryDiv.appendChild(categoryHeader);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const itemsDiv = document.createElement('div');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  itemsDiv.className = 'items';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Filtra solo gli elementi disponibili e crea i div per i piatti

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  category.items.filter(item => item.available).forEach(item => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const itemDiv = document.createElement('div');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  itemDiv.className = 'item';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const itemHeader = document.createElement('div');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  itemHeader.className = 'item-header';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const itemName = document.createElement('div');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  itemName.className = 'item-name';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  itemName.textContent = item.name;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  itemHeader.appendChild(itemName);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const itemPrice = document.createElement('div');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  itemPrice.className = 'item-price';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  itemPrice.textContent = item.price;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  itemHeader.appendChild(itemPrice);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  itemDiv.appendChild(itemHeader);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (item.description) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const itemDescription = document.createElement('p');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  itemDescription.className = 'item-description';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  itemDescription.textContent = item.description;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  itemDiv.appendChild(itemDescription);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  itemsDiv.appendChild(itemDiv);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  categoryDiv.appendChild(itemsDiv);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  menuContent.appendChild(categoryDiv);

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  }



Â  Â  Â  Â  // Genera il QR Code utilizzando l'URL corrente del sito

Â  Â  Â  Â  function generateQR() {

Â  Â  Â  Â  Â  Â  const qrCodeDiv = document.getElementById('qrCode');

Â  Â  Â  Â  Â  Â  // Ottiene l'URL pulito (senza parametri)

Â  Â  Â  Â  Â  Â  const url = window.location.href.split('?')[0];

Â  Â  Â  Â  Â  Â  qrCodeDiv.innerHTML = ''; // Pulisce il contenitore

Â  Â  Â  Â  Â  Â  // Inizializza il QR Code con le opzioni di colore

Â  Â  Â  Â  Â  Â  new QRCode(qrCodeDiv, {

Â  Â  Â  Â  Â  Â  Â  Â  text: url,

Â  Â  Â  Â  Â  Â  Â  Â  width: 128,

Â  Â  Â  Â  Â  Â  Â  Â  height: 128,

Â  Â  Â  Â  Â  Â  Â  Â  colorDark: "#3E2723",

Â  Â  Â  Â  Â  Â  Â  Â  colorLight: "#F5EFE5",

Â  Â  Â  Â  Â  Â  Â  Â  correctLevel: QRCode.CorrectLevel.H

Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  }



Â  Â  Â  Â  // Event listener per la pressione prolungata (touch) sul logo per l'accesso admin

Â  Â  Â  Â  document.getElementById('adminLogoTrigger').addEventListener('touchstart', (e) => {

Â  Â  Â  Â  Â  Â  e.preventDefault();

Â  Â  Â  Â  Â  Â  adminTimer = setTimeout(showLogin, 1000); // 1 secondo

Â  Â  Â  Â  });



Â  Â  Â  Â  // Cancella il timer se il tocco finisce

Â  Â  Â  Â  document.getElementById('adminLogoTrigger').addEventListener('touchend', () => {

Â  Â  Â  Â  Â  Â  clearTimeout(adminTimer);

Â  Â  Â  Â  });



Â  Â  Â  Â  // Cancella il timer se si sposta il dito

Â  Â  Â  Â  document.getElementById('adminLogoTrigger').addEventListener('touchmove', () => {

Â  Â  Â  Â  Â  Â  clearTimeout(adminTimer);

Â  Â  Â  Â  });



Â  Â  Â  Â  // Funzione per nascondere il pannello admin se si clicca fuori (per sicurezza)

Â  Â  Â  Â  function hideAdminToggle(event) {

Â  Â  Â  Â  Â  Â  const adminPanel = document.getElementById('adminPanel');

Â  Â  Â  Â  Â  Â  const isClickInsidePanel = adminPanel.contains(event.target);

Â  Â  Â  Â  Â  Â  const isClickOnLogo = document.getElementById('adminLogoTrigger').contains(event.target);

Â  Â  Â  Â  Â  Â  if (isAdminLoggedIn && !isClickInsidePanel && !isClickOnLogo) {

Â  Â  Â  Â  Â  Â  Â  Â  adminPanel.style.display = 'none';

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  // Funzione per cambiare la tab nel pannello admin

Â  Â  Â  Â  function showAdminTab(tab) {

Â  Â  Â  Â  Â  Â  document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));

Â  Â  Â  Â  Â  Â  document.querySelectorAll('.admin-content').forEach(c => c.classList.remove('active'));

Â  Â  Â  Â  Â  Â  document.querySelector(`.admin-tab[onclick="showAdminTab('${tab}')"]`).classList.add('active');

Â  Â  Â  Â  Â  Â  document.getElementById(tab + 'Content').classList.add('active');

Â  Â  Â  Â  }



Â  Â  Â  Â  // Esegue le funzioni principali all'avvio della pagina

Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', () => {

Â  Â  Â  Â  Â  Â  loadMenu();

Â  Â  Â  Â  Â  Â  generateQR();

Â  Â  Â  Â  Â  Â  document.getElementById('adminPanel').style.display = 'none';

Â  Â  Â  Â  });



Â  Â  Â  Â  // Placeholder per le funzioni Admin non ancora implementate

Â  Â  Â  Â  function exportMenu() { console.log('Funzione Export Menu non implementata.'); }

Â  Â  Â  Â  function importMenu() { console.log('Funzione Import Menu non implementata.'); }

Â  Â  Â  Â  function handleImport(event) { console.log('Funzione Import gestita.'); }

Â  Â  Â  Â  function saveAllChanges() { console.log('Funzione Salva Modifiche non implementata.'); }

Â  Â  Â  Â  function resetMenu() { console.log('Funzione Ripristina Menu Originale non implementata.'); }

Â  Â  </script>

</body>

</html>

